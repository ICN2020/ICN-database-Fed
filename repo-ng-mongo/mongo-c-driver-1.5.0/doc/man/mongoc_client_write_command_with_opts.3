.\" This manpage is Copyright (C) 2016 MongoDB, Inc.
.\" 
.\" Permission is granted to copy, distribute and/or modify this document
.\" under the terms of the GNU Free Documentation License, Version 1.3
.\" or any later version published by the Free Software Foundation;
.\" with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
.\" A copy of the license is included in the section entitled "GNU
.\" Free Documentation License".
.\" 
.TH "MONGOC_CLIENT_WRITE_COMMAND_WITH_OPTS" "3" "2016\(hy11\(hy27" "MongoDB C Driver"
.SH NAME
mongoc_client_write_command_with_opts() \- None
.SH "SYNOPSIS"

.nf
.nf
bool
mongoc_client_write_command_with_opts (mongoc_client_t *client,
                                       const char      *db_name,
                                       const bson_t    *command,
                                       const bson_t    *opts,
                                       bson_t          *reply,
                                       bson_error_t    *error);
.fi
.fi

Execute a command on the server, applying logic that is specific to commands that write, and taking the MongoDB server version into account. To send a raw command to the server without any of this logic, use
.B mongoc_client_command_simple
.

Use this function for commands that write such as "drop" or "createRole" (but not for "insert", "update", or "delete", see
.B Basic Write Operations
). Write concern is applied from
.B opts
, or else from
.B client
. The write concern is omitted for MongoDB before 3.2. Collation is applied from
.B opts
(
.B see example for 
). Collation requires MongoDB 3.2 or later, otherwise an error is returned. No read concern or read preferences are applied.

To target a specific server, include an integer "serverId" field in
.B opts
with an id obtained first by calling
.B mongoc_client_select_server
, then
.B mongoc_server_description_id
on its return value.

.B reply
is always initialized, and must be freed with
.B bson_destroy(3)
.

.SH "PARAMETERS"

.TP
.B
client
A
.B mongoc_client_t
.
.LP
.TP
.B
db_name
The name of the database to run the command on.
.LP
.TP
.B
command
A
.B bson_t
containing the command specification.
.LP
.TP
.B
opts
A
.B bson_t
containing additional options.
.LP
.TP
.B
reply
A location for the resulting document.
.LP
.TP
.B
error
An optional location for a
.B bson_error_t
or
.B NULL
.
.LP

.SH "ERRORS"

Errors are propagated via the
.B error
parameter.

.SH "RETURNS"

.B true
if successful; otherwise
.B false
and
.B error
is set.

A write concern timeout or write concern error is considered a failure.

.SH "BASIC WRITE OPERATIONS"

Do not use this function to call the basic write commands "insert", "update", and "delete". Those commands require special logic not implemented in
.B mongoc_client_write_command_with_opts
. For basic write operations use CRUD functions such as
.B mongoc_collection_insert
and the others described in
.B the CRUD tutorial
, or use the
.B Bulk API
.

.SH "EXAMPLE"

See the example code for
.B mongoc_client_read_command_with_opts
.


.B
.SH COLOPHON
This page is part of MongoDB C Driver.
Please report any bugs at https://jira.mongodb.org/browse/CDRIVER.