.\" This manpage is Copyright (C) 2016 MongoDB, Inc.
.\" 
.\" Permission is granted to copy, distribute and/or modify this document
.\" under the terms of the GNU Free Documentation License, Version 1.3
.\" or any later version published by the Free Software Foundation;
.\" with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
.\" A copy of the license is included in the section entitled "GNU
.\" Free Documentation License".
.\" 
.TH "MONGOC_COLLECTION_CREATE_INDEX_WITH_OPTS" "3" "2016\(hy11\(hy07" "MongoDB C Driver"
.SH NAME
mongoc_collection_create_index_with_opts() \- This function will request the creation of a new index.
.SH "SYNOPSIS"

.nf
.nf
bool
mongoc_collection_create_index_with_opts (mongoc_collection_t      *collection,
                                          const bson_t             *keys,
                                          const mongoc_index_opt_t *index_opts,
                                          const bson_t             *command_opts,
                                          bson_t                   *reply,
                                          bson_error_t             *error);
.fi
.fi

.SH "PARAMETERS"

.TP
.B
collection
A
.B mongoc_collection_t
.
.LP
.TP
.B
keys
A
.B bson_t
.
.LP
.TP
.B
index_opts
A mongoc_index_opt_t.
.LP
.TP
.B
command_opts
A
.B bson_t
with extra options, such as writeConcern or collation, or
.B NULL
.
.LP
.TP
.B
reply
An optional location for a
.B bson_t
which will store the server's reply.
.LP
.TP
.B
error
An optional location for a
.B bson_error_t
or
.B NULL
.
.LP

.SH "DESCRIPTION"

This function will request the creation of a new index.

This function will use the
.B createIndexes
command if available on the MongoDB server. If not, it will fallback to inserting into
.B system.indexes
for compatibility with MongoDB <= 2.4.

The server's reply is stored in
.B reply
.

If no write concern is provided in
.B command_opts
, the collection's write concern is used.

See
.B mongoc_index_opt_t
for options on creating indexes.

.SH "ERRORS"

Errors are propagated via the
.B error
parameter.

.SH "RETURNS"

.B true
on success, otherwise
.B false
and
.B error
is set.

.B reply
is always initialized and must be destroyed with
.B bson_destroy(3)
. If the server is running an obsolete version of MongoDB then
.B reply
may be empty, though it will still be initialized.


.B
.SH COLOPHON
This page is part of MongoDB C Driver.
Please report any bugs at https://jira.mongodb.org/browse/CDRIVER.